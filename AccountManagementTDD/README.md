<div dir="rtl">

# مدیریت حساب بانکی

## بخش اول - کشف خطا

- پرسش اول: در این که چه خطایی وجود دارد؟ و به نظر شما چرا دیده نشده است؟ موجودی حساب ممکن است منفی شود. در واقع پیشگیری لازم برای زمانی که میزان برداشت از حساب بیشتر از موجودی حساب است، انجام نشده است. زمانی که درخواست غیرمجاز برای برداشت بیش از موجودی حساب انجام می‌شود، باید درخواست رد شود.

- پرسش دوم: پس از یافتن خطا، یک آزمون برای آن بنویسید که منجر به کشف آن خطا شود. سپس آن را به گونه‌ای اصلاح کنید که آن مورد آزمون، پاس شود. نام تابع آزمون برای کشف خطا `testNegativeBalance`. همچنین تغییرات لازم برای بررسی برداشت بیش از موجودی (که به موجودی منفی می‌انجامد) نیز در تابع `calculateBalance` انجام شده است. این تغییرات با فرض اینکه تراکنش‌ها به صورت متوالی اجرا می‌شوند (یعنی لازم نیست همه با هم اجرا شوند) صورت گرفته. و نیز اگر یک تراکنش انجام نشد می‌توانیم تراکنش بعدی را از لیست تراکنش‌ها اجرا کنیم (این قسمت رو چون واضح نبود با فرض خودم زدم).

تابع `calculateBalance` پس از اصلاحات:

```java
... //before

else if (t.getType() == TransactionType.WITHDRAWAL) {
  if (t.getAmount() < balance) {
      balance -= t.getAmount();
      transactionHistory.add(t);
  }
}

... //after
```

</div>
